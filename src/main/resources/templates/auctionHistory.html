<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sale History</title>
    <link rel="stylesheet" th:href="@{CSS/saleHistory.css}">
    
    
    <link th:href="@{/CSS/headerFooter.css}" rel="stylesheet">
     <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css}" rel="stylesheet">
     <script th:src="@{/JS/sidebar.js}"></script>
     <script th:src="@{/JS/CategorySelect.js}"></script>
   
</head>
<body>
<header th:insert="~{fragments/header :: header}"></header>
    <div id="container">
    <h2 id="page-title">Auction History</h2>

    <div id="winningbids">

    <form id="search-form">
        <label class="search-label">Search: </label>
        <input type="text" id="search-field" name="searchfield" value="">
        <label class="search-label">Sort By: </label>
        <select id="sort-by" name="sortby">

            <option value="item">Item Name</option>
            <option value="price">Price</option>
            <option value="buyer">Buyer</option>
            <option value="Auctionstatus">Auction Status</option>
            <option value="status">Delivery Status</option>
        </select>
        <input type="submit" id="search-button" name="search" value="Search">
    </form>
    <table id="sales-table">
        <tr>
            <th>Auction No</th>
            <th>Item Name</th>
            <th>Item Image</th>
            <th>Current Winning Bid</th>
            <th>End Date</th>
            <th>Auction Status</th>
            <th>Highest Bidder</th>
        </tr>
        <tr th:each="auction : ${sellingAuctions}">
            <td th:text="${auction.auctionID}"></td>
            <td>
                <a class="table-link" th:href="@{/itemList/{id}(id=${auction.item.itemID})}" th:text="${auction.item.itemName}"></a>
            </td>
            <td>
                <img class="item-image" th:src="@{${auction.item.getThumbnail()}}" alt="Item Image">
            </td>
          <td>
    <span th:if="${auction.getHighestBid() == null}">No Bids</span>
    <span th:unless="${auction.getHighestBid() == null}" th:text="'USD $' + ${auction.getHighestBid()}"></span>
</td>

            <td th:text="${#temporals.format(auction.endTime, 'yyyy/MM/dd HH:mm')}"></td>
            <td th:text="${auction.stat}"></td>
            <td>
                <a class="table-link" 
       th:if="${not #lists.isEmpty(auction.auctionTracks)}"
       th:href="@{/viewSeller/{id}(id=${auction.auctionTracks[auction.auctionTracks.size() - 1].user.userID})}"
       th:text="${auction.auctionTracks[auction.auctionTracks.size() - 1].user.username}">
    </a>
                <span th:if="${auction.getHighestBid() == null}">None</span>
            </td>
        </tr>
    </table>

</div>
</div>
 <footer th:insert="~{fragments/footer :: footer}"></footer>
 <script>
        lucide.createIcons();
        </script>

</body>
</html>
