<html xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" th:href="@{/CSS/itemList.css}">
  <link th:href="@{/CSS/headerFooter.css}" rel="stylesheet">
  
   <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css}" rel="stylesheet">
  
  <script th:src="@{/JS/sidebar.js}"></script>
</head>
<body>
<header th:insert="fragments/header :: header"></header>
<h2>Search Results for "<span th:text="${query}"></span>"</h2>

<div id="saleItemList">

    <!-- If no results found -->
    <div th:if="${searchResults.isEmpty()}">
        <p>No items found.</p>
    </div>

    <!-- Loop through search results -->
    <div id="saleItemContainer" th:each="item : ${searchResults}">

        <!-- Show Normal Sale Items -->
        <div th:if="${item.sellType != null and item.sellType.name() != 'AUCTION'}">
            <div id="saleItem">
                <img th:src="@{${item.getThumbnail()}}" width="100" height="100" alt="Thumbnail">
                <p id="status" th:text="${item.stat}"></p>
                <p id="price" th:text="'$' + ${item.price}"></p>
            </div>
            <a th:href="@{/itemList/{itemID}(itemID=${item.itemID})}" th:text="${item.itemName}" id="name"></a>
        </div>

        <!-- Show Auction Items -->
        <div th:if="${item.sellType != null and item.sellType.name() == 'AUCTION'}">
            <div id="saleItem">
                <img th:src="@{${item.getThumbnail()}}" width="100" height="100" alt="Thumbnail">
                <p id="status" th:text="${item.stat}"></p>

                <!-- Find auction matching this item -->
                <p id="price" th:each="auction : ${auctionResults}"
                   th:if="${auction.item.itemID == item.itemID}"
                   th:text="'$' + ${auction.startPrice}"></p>
            </div>
            <a th:href="@{/itemList/{itemID}(itemID=${item.itemID})}" th:text="${item.itemName}" id="name"></a>
        </div>

    </div>
</div>

<footer th:insert="fragments/footer :: footer"></footer>
 <script>
        lucide.createIcons();
      </script>


</body>

</html>